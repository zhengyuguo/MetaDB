{% extends "layout.html" %}
{% block head %}
  {{ super() }}
{% endblock %}
{% block content %}
<!-- //obaida
back-end will provide data for the below charts-
1.Publications by Geographic Location(Number of publication by each geographic area)
2.Publications by Journal(Number of publication by each journal, take top 5 journal, rest of them put it in "other" category)
3.Publications by Research area(Number of publication by each research area)
4.Publications by Disease(Number of publication by each disease)

*** I am not sure how to provide data from python to javascript in google chart. Please check the below link
https://developers.google.com/chart/interactive/docs/dev/gviz_api_lib 
to get idea about that.
-->
<div role="tabpanel">
<div class="col-sm-3 sidebar">
  <!-- Nav tabs -->
  <ul class="nav nav-stacked" role="tablist">
    <li role="presentation" class="active"><a href="#chart_div" aria-controls="chart_div" role="tab" data-toggle="tab">Publications by Geographic Location</a></li>
    <li role="presentation"><a href="#chart_div2" aria-controls="chart_div2" role="tab" data-toggle="tab">Publications by Journal</a></li>
    <li role="presentation"><a href="#chart_div3" aria-controls="chart_div3" role="tab" data-toggle="tab">Publications by Research Area</a></li>
    <li role="presentation"><a href="#chart_div4" aria-controls="chart_div4" role="tab" data-toggle="tab">Publications by Disease</a></li>
  </ul>
  </div>

  <!-- Tab panes -->
  <div class="col-sm-9 tab-content">
    <div role="tabpanel" class="tab-pane active" id="chart_div">...</div>
    <div role="tabpanel" class="tab-pane" id="chart_div2"></div>
    <div role="tabpanel" class="tab-pane" id="chart_div3"></div>
    <div role="tabpanel" class="tab-pane" id="chart_div4"></div>
	<div style="margin-bottom:5px"></div>
  </div>
</div>


<script type="text/javascript">
    
      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});
      
      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart);


      // Callback that creates and populates a data table, 
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

      // Create the data table.
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Country');
      data.addColumn('number', 'Publications');
	  //will be replaced by real data from database
      data.addRows([
        ['USA', 3],
        ['Canada', 1],
        ['Germany', 1],
        ['UK', 1],
        ['France', 2]
      ]);
	  
	        var data_journal = new google.visualization.DataTable();
      data_journal.addColumn('string', 'Journal');
      data_journal.addColumn('number', 'Publications');
	  //will be replaced by real data from database
      data_journal.addRows([
        ['Nature', 3],
        ['Molecular Cell', 1],
        ['Other', 1]
      ]);
	  
	  //try to use json data, **experimental
	  var jsonData = $.ajax({
          url: "http://127.0.0.1:5000/jsondata/",
          dataType:"json",
          async: true
          }).responseText;
     // Create our data table out of JSON data loaded from server.
      var jdata = new google.visualization.DataTable(jsonData);


      // Set chart options
      var options = {'title':'Publications by Geographic Location',
                     'width':600,
                     'height':400};
					 
					       // Set chart options
      var options_journal = {'title':'Publications by Journal',
                     'width':600,
                     'height':400};

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
      chart.draw(data, options);
	  var chart = new google.visualization.PieChart(document.getElementById('chart_div2'));
      chart.draw(data_journal, options_journal);
	  	  var chart = new google.visualization.ColumnChart(document.getElementById('chart_div3'));
      chart.draw(data_journal, options_journal);
	    var chart = new google.visualization.PieChart(document.getElementById('chart_div4'));
      chart.draw(jdata, options);
	  
    }
    </script>

{%endblock%}